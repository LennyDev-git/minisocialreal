{% extends "base.html" %}

{% block content %}
<div class="main-content">
    <div class="profile-card" style="background: white; border-radius: 12px; padding: 30px; border: 1px solid #ddd; text-align: center;">
        
        <div style="position: relative; display: inline-block;">
            <img src="{{ url_for('static', filename=profile_user.profile_pic) }}" 
                 style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 4px solid #ff3856;"
                 onerror="this.onerror=null;this.src='https://ui-avatars.com/api/?name={{ profile_user.username }}&size=128&background=random&color=fff';">
            
            {% if profile_user.is_verified or profile_user.username == "Lenny Fisbeck" %}
                <div style="position: absolute; bottom: 5px; right: 5px; background: #1d9bf0; color: white; border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; border: 3px solid white; font-size: 14px;">âœ”</div>
            {% endif %}
        </div>

        <h2 style="margin: 15px 0 5px 0;">{{ profile_user.username }}</h2>
        <p style="color: #65676b; margin-bottom: 20px; padding: 0 20px; line-height: 1.5;">{{ profile_user.bio }}</p>

        <div style="display: flex; justify-content: center; gap: 30px; margin-bottom: 20px; border-top: 1px solid #eee; padding-top: 20px;">
            <div><strong>{{ followers_count }}</strong> <br><span style="color: #65676b; font-size: 13px;">Followers</span></div>
            <div><strong>{{ following_count }}</strong> <br><span style="color: #65676b; font-size: 13px;">Following</span></div>
        </div>

        {% if profile_user.username == current_user.username %}
            <div style="background: #f9f9f9; padding: 20px; border-radius: 10px; margin-top: 20px; text-align: left;">
                <h4 style="margin-top: 0; margin-bottom: 15px;">Edit Your Profile</h4>
                <form action="{{ url_for('edit_profile') }}" method="POST" enctype="multipart/form-data">
                    <label style="font-size: 13px; font-weight: bold; display: block; margin-bottom: 5px;">Update Bio:</label>
                    <textarea name="bio" style="width: 100%; height: 80px; border: 1px solid #ddd; border-radius: 8px; padding: 10px; margin-bottom: 15px; resize: none; font-family: inherit;">{{ profile_user.bio }}</textarea>
                    
                    <label style="font-size: 13px; font-weight: bold; display: block; margin-bottom: 5px;">Change Profile Picture:</label>
                    <input type="file" name="profile_pic" accept="image/*" style="margin-bottom: 20px; font-size: 12px;">
                    
                    <button type="submit" style="width: 100%; background: #000; color: white; border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer;">Save All Changes</button>
                </form>
            </div>
        {% else %}
            <div style="display: flex; gap: 10px; justify-content: center; margin-top: 20px;">
                <a href="{{ url_for('follow_user', username=profile_user.username) }}" 
                   style="background: {{ '#ddd' if is_following else '#ff3856' }}; color: {{ 'black' if is_following else 'white' }}; text-decoration: none; padding: 10px 25px; border-radius: 25px; font-weight: bold;">
                    {{ 'Unfollow' if is_following else 'Follow' }}
                </a>
                <a href="{{ url_for('chats_overview', friend_username=profile_user.username) }}" 
                   style="background: #eee; color: black; text-decoration: none; padding: 10px 25px; border-radius: 25px; font-weight: bold;">Message</a>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}



























